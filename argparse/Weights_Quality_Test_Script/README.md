# Weights Quality Test Script
---
## Introduction
---
### target function

Дана целевая функция $$targetFunction$$, использующая вектор аргументов (типа float) размера $$n$$, заданная следующей формулой:
$$\displaystyle targetFunction(X)=(\sum_{i=1}^n (x_i^2-x_i)*LRR)*RR$$, где $$\displaystyle X=[x_1,x_2,...,x_n], LRR$$ (Local Regular Ratio) $$=0.033, RR$$ (Regular Ratio) $$=0.000993$$.


### linear function
Дана линейная функция $$linearFunction$$, использующая, помимо вектора аргументов, вектор весов того же размера $$n$$, заданная следующей формулой: $$\displaystyle linearFunction(X, W)=(\sum_{i=1}^nw_ix_i)*RR$$, где $$\displaystyle X=[x_1,x_2,...,x_n], W=[w_1,w_2,...,w_n], RR$$ (Regular Ratio) $$=0.00044701$$.


### loss function
Поставим следующую задачу: мы хотим максимально приблизить значение функции $$targetFunction(X)$$ к значению функции $$linearFunction(X,W)$$. Для этого необходимо найти такой вектор $$W$$, что $$|targetFunction(X)-linearFunction(X,W)|\to min$$. По фиксированному вектору аргументов $$X$$ будем тестировать вектор весов $$W$$ по функции потерь $$\displaystyle lossFunction(X,W)=(targetFunction(X)-linearFunction(X,W))^2$$. Теперь наша задача состоит в том, чтобы свести значение функции потер к минимуму $$\displaystyle lossFunction(X,W)\to min$$.

## Database reading and recording results
---
### Flag --read (-r)
Пусть существует файл weights.txt со 100 различными векторами весов, которые будет тестировать скрипт. Мы хотим при запуске скрипта иметь флаг **--read (-r)**, а в качестве аргумента указывать файл weights.txt для чтения.

Файл weights.txt:
```
697.39791 -56.82987 -56.40081 186.13043 990.09015 349.26910 -901.21792 -156.42360 -730.21596 64.69911 -475.63197 -365.48982 333.99218 120.36358 342.20160 750.39739 -538.28944 376.85738 -181.91865 434.14532
195.78869 212.14764 229.49234 -393.06014 -734.68734 763.61479 -782.18821 -854.53894 -717.31158 -452.34217 369.81459 437.15486 -143.51667 -692.29913 -594.85925 695.28742 368.88367 930.85682 521.26947 555.53793
...
-483.73780 -281.13107 -639.23641 658.19732 -565.48791 -340.18333 -106.21022 651.71479 -888.99572 -682.54901 -925.49129 682.30604 799.80617 219.79896 -420.90531 -229.86872 -99.58163 -695.39375 379.28603 56.99016
```

### Flag --write (-w)
Аналогично, мы хотим после расчета функции потерь $$lossFunction(X,W)$$ записать ее значение в какой-то файл, поэтому необходимо создать флаг **--write (-w)**, а в качестве аргумента указывать файл для записи.

### Flag --sorted (-s)
Если мы хотим, чтобы после расчетов функции потерь, все результаты шли в отсортированном порядке (векторы весов будут идти от лучших к худшим: в порядке возрастания значения функции потерь), то создадим флаг **--sorted (-s)**, в качестве аргумента которого необходимо указать значение **true**, если мы хотим отсортировать результаты, или **false** в противоположном случае. Этот флаг можно не указывать, тогда он примет значение по умолчанию, равный **false**.

## Running script and getting results
---
Запустим скрипт следующей командой:
```
python weightsQualityTestScript.py --read weights.txt --write result.txt --sorted true
```
После чего скрипт посчитает для всех 100 векторов весов из файла weights.txt значение функции потерь, запишет их в файл result.txt и отсортирует вектора весов от лучших к худшим (в порядке возрастания функции потерь).

Файл result.txt:
```
Weights #79 lost function result: 0.03354970198009427
Weights #19 lost function result: 37.25475268341729
Weights #33 lost function result: 80.871615869105
Weights #13 lost function result: 1978.5395150909858
Weights #56 lost function result: 2138.7391657968756
Weights #44 lost function result: 2614.5881057639313
...
Weights #34 lost function result: 1468838.1047626967
Weights #7 lost function result: 2001360.7764570017
Weights #50 lost function result: 2808273.692623817
```
